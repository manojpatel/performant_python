# -------------------------------------------------------------------------
# Application Configuration
# -------------------------------------------------------------------------
# App service name and port
APP_PORT=8080
ENABLE_TRACING=true
OTEL_SERVICE_NAME=performant-python
OTEL_EXPORTER_OTLP_ENDPOINT=http://jaeger:4317

# -------------------------------------------------------------------------
# Database Configuration (Postgres)
# -------------------------------------------------------------------------
# Main App DB
POSTGRES_USER=performant
POSTGRES_PASSWORD=secretpass
POSTGRES_DB=analytics
POSTGRES_PORT=5432
# Full URL is constructed in docker-compose or app, but here for reference/direct use
POSTGRES_URL=postgresql://${POSTGRES_USER}:${POSTGRES_PASSWORD}@postgres:${POSTGRES_PORT}/${POSTGRES_DB}

# -------------------------------------------------------------------------
# Caching / Rate Limiting (Valkey)
# -------------------------------------------------------------------------
VALKEY_PORT=6379
VALKEY_URL=valkey://valkey:${VALKEY_PORT}

# -------------------------------------------------------------------------
# Identity (Zitadel)
# -------------------------------------------------------------------------
ZITADEL_EXT_PORT=8081
ZITADEL_MASTERKEY=MasterkeyNeedsToBe32BytesLong123
# Helper vars for Zitadel DB connection
ZITADEL_DB_NAME=zitadel
ZITADEL_ISSUER_URL=http://zitadel:8080
ZITADEL_API_URL=http://zitadel:8080

# -------------------------------------------------------------------------
# Authorization (OpenFGA)
# -------------------------------------------------------------------------
OPENFGA_API_PORT=8082
OPENFGA_PLAYGROUND_PORT=3000
OPENFGA_GRPC_PORT=8084
OPENFGA_DB_URI=postgres://${POSTGRES_USER}:${POSTGRES_PASSWORD}@postgres:${POSTGRES_PORT}/openfga?sslmode=disable
OPENFGA_STORE_ID=

# -------------------------------------------------------------------------
# Observability (Jaeger + OpenSearch)
# -------------------------------------------------------------------------
JAEGER_UI_PORT=16686
JAEGER_OTLP_GRPC_PORT=4317
JAEGER_OTLP_HTTP_PORT=4318
OPENSEARCH_PORT=9200

# -------------------------------------------------------------------------
# AWS / S3 (Iceberg Access)
# -------------------------------------------------------------------------
AWS_ACCESS_KEY_ID=minioadmin
AWS_SECRET_ACCESS_KEY=minioadmin
AWS_REGION=us-east-1
# -------------------------------------------------------------------------
# Security
# -------------------------------------------------------------------------
AUTH_GATEWAY_ALLOWED_ORIGINS=http://localhost:3000,http://localhost:8080

# -------------------------------------------------------------------------
# Auth Gateway Internal Configuration
# -------------------------------------------------------------------------
AUTH_GATEWAY_REDIS_URL=redis://valkey:6379/
AUTH_GATEWAY_UPSTREAM_URL=http://performant-python-app:8080
AUTH_GATEWAY_ZITADEL_ISSUER_URL=http://zitadel:8080
AUTH_GATEWAY_ZITADEL_API_URL=http://zitadel:8080
AUTH_GATEWAY_OPENFGA_URL=http://openfga:8080
